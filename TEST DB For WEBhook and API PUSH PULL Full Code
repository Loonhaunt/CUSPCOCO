// 20180111121514
// https://api.fulcrumapp.com/api/v2/forms/3ffce3bc-7804-4fb5-83c4-60e4e8b23a64.json?token=4049d194f963fab3a1987fc5273a60753d0b49842748dbfd9c1c15c20d0d87c20e7d10dd72185953

{
  "form": {
    "name": "REST API Data PUSH PULL Test",
    "description": "Four Field Table DB to test data scripting",
    "version": 28,
    "bounding_box": [
      38.9825065294644,
      -105.35828582021,
      38.9825065294644,
      -105.35828582021
    ],
    "record_title_key": "b5fc",
    "title_field_keys": [
      "b5fc"
    ],
    "status_field": {
      "type": "StatusField",
      "label": "Status",
      "key": "@status",
      "data_name": "status",
      "default_value": "",
      "enabled": false,
      "read_only": false,
      "hidden": false,
      "description": "",
      "choices": [
        
      ],
      "required": false,
      "disabled": false,
      "default_previous_value": false
    },
    "auto_assign": true,
    "hidden_on_dashboard": false,
    "record_count": 1,
    "geometry_types": [
      "Point"
    ],
    "geometry_required": false,
    "script": "//===Hides field 'phone_number', 'field_one', changes the field names to\n//===fields to hide make sure field attrib box in app desing is checked \"Hidden\".\n//===This instance I have removed 'Data_Manager' for testing. \n//===Made myself Data_Manager to test. \n\nON('load-record', function(event) {\n  var adminRoles = ['Owner', 'Manager',];\n\n  // if the current role is one of the designated admin roles...\n  if (ISROLE(adminRoles)) {\n    // make the fields visible\n    SETHIDDEN('phone_number', false);\n    SETHIDDEN('field_one', false);\n  }\n});\n\n//==============================================================\nfunction getElevation() {\n  var usgsURL = 'https://nationalmap.gov/epqs/pqs.php?x=' + LONGITUDE() + '&y=' + LATITUDE() + '&units=Feet&output=json';\n\n  // use cors/https proxy for web requests\n  if (!ISMOBILE()) {\n    usgsURL = 'https://cors-light.herokuapp.com/' + usgsURL;\n  }\n\n  var options = {\n    url: usgsURL\n  };\n\n  REQUEST(options, function(error, response, body) {\n    if (error) {\n      ALERT('Error with request: ' + INSPECT(error));\n    } else {\n      elevation = JSON.parse(body);\n      SETVALUE('usgs_elevation', elevation.USGS_Elevation_Point_Query_Service.Elevation_Query.Elevation);\n    }\n  });\n}\n//===================================================================\nON('change-geometry', getElevation);\nfunction getWeather() {\n  var apiKey = '3b64b100d39655a4';\n\n  var options = {\n    url: 'https://api.wunderground.com/api/' + apiKey + '/conditions/q/' + LATITUDE() + ',' + LONGITUDE() + '.json'\n  };\n\n  REQUEST(options, function(error, response, body) {\n    if (error) {\n      ALERT('Error with request: ' + error);\n    } else {\n      var data = JSON.parse(body).current_observation;\n      SETVALUE('weather_summary', data.weather + ', ' + data.wind_string);\n    }\n  });\n}\n//=========================================================================\nON('change-geometry', getWeather);\n\n  // Adds Button that will send SMS to Phone number entered in phone number field\n\nON('click', 'send_sms', function(event) {\n  if (!EXISTS($phone_number)) {\n    ALERT('You must enter a phone number.');\n    return;\n  }\n\n  if (!ISMOBILE()) {\n    ALERT('Only mobile devices support making phone calls.');\n    return;\n  }\n\n  // iOS uses the '&' character to separate the number from the sms text\n  // Note that not all SMS apps on Android support passing the body text.\n  if (PLATFORM() === 'iOS') {\n    OPENURL(FORMAT('sms:%s&body=%s',\n      $phone_number, encodeURIComponent($sms)));\n  } else {\n    OPENURL(FORMAT('sms:%s?body=%s',\n      $phone_number, encodeURIComponent($sms)));\n  }\n});\n//=====================================================================",
    "projects_enabled": false,
    "assignment_enabled": true,
    "id": "3ffce3bc-7804-4fb5-83c4-60e4e8b23a64",
    "created_at": "2018-01-10T19:29:02Z",
    "updated_at": "2018-01-11T19:11:25Z",
    "image": "https://fulcrumapp.s3.amazonaws.com/form-images/3ffce3bc-7804-4fb5-83c4-60e4e8b23a64-2efd13a3-45b3-4175-8615-20be249d5476.png",
    "image_thumbnail": "https://fulcrumapp.s3.amazonaws.com/form-images/thumb_3ffce3bc-7804-4fb5-83c4-60e4e8b23a64-2efd13a3-45b3-4175-8615-20be249d5476.png",
    "image_small": "https://fulcrumapp.s3.amazonaws.com/form-images/small_3ffce3bc-7804-4fb5-83c4-60e4e8b23a64-2efd13a3-45b3-4175-8615-20be249d5476.png",
    "image_large": "https://fulcrumapp.s3.amazonaws.com/form-images/large_3ffce3bc-7804-4fb5-83c4-60e4e8b23a64-2efd13a3-45b3-4175-8615-20be249d5476.png",
    "elements": [
      {
        "type": "Section",
        "key": "75db",
        "label": "Section 8",
        "description": "Test section\n",
        "required": false,
        "disabled": false,
        "hidden": false,
        "data_name": "section_8",
        "default_value": null,
        "visible_conditions_type": null,
        "visible_conditions": null,
        "required_conditions_type": null,
        "required_conditions": null,
        "display": "inline",
        "elements": [
          {
            "type": "TextField",
            "key": "4bde",
            "label": "Phone Number",
            "description": null,
            "required": true,
            "disabled": false,
            "hidden": true,
            "data_name": "phone_number",
            "default_value": null,
            "visible_conditions_type": null,
            "visible_conditions": null,
            "required_conditions_type": null,
            "required_conditions": null,
            "numeric": false,
            "pattern": null,
            "pattern_description": null,
            "min_length": null,
            "max_length": null,
            "default_previous_value": false
          },
          {
            "type": "TextField",
            "key": "b5fc",
            "label": "Field One",
            "description": null,
            "required": false,
            "disabled": false,
            "hidden": true,
            "data_name": "field_one",
            "default_value": null,
            "visible_conditions_type": null,
            "visible_conditions": null,
            "required_conditions_type": null,
            "required_conditions": null,
            "numeric": false,
            "pattern": null,
            "pattern_description": null,
            "min_length": null,
            "max_length": null,
            "default_previous_value": false
          },
          {
            "type": "TextField",
            "key": "2430",
            "label": "Weather Summary",
            "description": null,
            "required": false,
            "disabled": false,
            "hidden": false,
            "data_name": "weather_summary",
            "default_value": null,
            "visible_conditions_type": null,
            "visible_conditions": null,
            "required_conditions_type": null,
            "required_conditions": null,
            "numeric": false,
            "pattern": null,
            "pattern_description": null,
            "min_length": null,
            "max_length": null,
            "default_previous_value": false
          },
          {
            "type": "YesNoField",
            "key": "6229",
            "label": "Are You Awake",
            "description": null,
            "required": false,
            "disabled": false,
            "hidden": false,
            "data_name": "are_you_awake",
            "default_value": null,
            "visible_conditions_type": null,
            "visible_conditions": null,
            "required_conditions_type": null,
            "required_conditions": null,
            "positive": {
              "label": "Yes",
              "value": "yes"
            },
            "negative": {
              "label": "No",
              "value": "no"
            },
            "neutral": {
              "label": "N/A",
              "value": "n/a"
            },
            "neutral_enabled": false,
            "default_previous_value": false
          },
          {
            "type": "TextField",
            "key": "71b5",
            "label": "Enter Number",
            "description": null,
            "required": false,
            "disabled": false,
            "hidden": false,
            "data_name": "enter_number",
            "default_value": null,
            "visible_conditions_type": null,
            "visible_conditions": null,
            "required_conditions_type": null,
            "required_conditions": null,
            "numeric": true,
            "format": "decimal",
            "min": null,
            "max": null,
            "min_length": null,
            "max_length": null,
            "default_previous_value": false
          },
          {
            "type": "TimeField",
            "key": "db3c",
            "label": "Today Time",
            "description": null,
            "required": true,
            "disabled": false,
            "hidden": true,
            "data_name": "today_time",
            "default_value": "now",
            "visible_conditions_type": null,
            "visible_conditions": null,
            "required_conditions_type": null,
            "required_conditions": null,
            "default_previous_value": false
          },
          {
            "type": "DateTimeField",
            "key": "87b5",
            "label": "Today Date",
            "description": null,
            "required": true,
            "disabled": false,
            "hidden": false,
            "data_name": "today_date",
            "default_value": "now",
            "visible_conditions_type": null,
            "visible_conditions": null,
            "required_conditions_type": null,
            "required_conditions": null,
            "default_previous_value": false
          },
          {
            "type": "TextField",
            "key": "654f",
            "label": "USGS Elevation",
            "description": null,
            "required": false,
            "disabled": false,
            "hidden": false,
            "data_name": "usgs_elevation",
            "default_value": null,
            "visible_conditions_type": null,
            "visible_conditions": null,
            "required_conditions_type": null,
            "required_conditions": null,
            "numeric": true,
            "format": "decimal",
            "min": null,
            "max": null,
            "min_length": null,
            "max_length": null,
            "default_previous_value": false
          },
          {
            "type": "TextField",
            "key": "5c11",
            "label": "SMS",
            "description": null,
            "required": true,
            "disabled": false,
            "hidden": false,
            "data_name": "sms",
            "default_value": null,
            "visible_conditions_type": null,
            "visible_conditions": null,
            "required_conditions_type": null,
            "required_conditions": null,
            "numeric": false,
            "pattern": null,
            "pattern_description": null,
            "min_length": null,
            "max_length": null,
            "default_previous_value": false
          },
          {
            "type": "HyperlinkField",
            "key": "93b4",
            "label": "Send SMS",
            "description": null,
            "required": false,
            "disabled": false,
            "hidden": false,
            "data_name": "send_sms",
            "default_value": null,
            "visible_conditions_type": null,
            "visible_conditions": null,
            "required_conditions_type": null,
            "required_conditions": [
              
            ],
            "default_url": ""
          }
        ]
      }
    ]
  }
}
